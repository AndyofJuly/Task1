# Task1
## 2020.5.22日代码更新说明
本次继续对读取excel中数据的方式进行了优化，将读取的工具类进行了封装，与业务进行了分离。

其次，将实体类中的一些静态类的属性提取出来封装成了一个类，并使得该类的属性与excel表中的字段一一对应，每次新增表格时，只需要新建excel并添加元素，然后在项目中新建对应的类即可，这样一来，后续新增一些有着静态数据的实体类时会非常方便

此外，项目开始推进到第二阶段，在项目中新增了与NPC对话的方法。由于写了读取excel表的工具类，因此新增这个功能的时候非常方便：首先在npc的excel表中新增words字段和内容，然后再NpcStatic类中新增words属性，最后新增对话功能的业务逻辑。


## 2020.5.20日下午代码更新说明
本次对代码读取excel中数据的方式进行了优化

这一次主要修改了ExcelToJson.java读取excel并解析为json的方式

这次改动，使得我们通过工具类ExcelToJson.java读取excel时，能够根据excel表的字段和数据的多少来自动转化为对象。相比于上一版，在这一版中，我们每次在某个类中增加一个属性时，不需要再在这个工具类中的一些地方做出进行相应的修改。

这样一来，无论是在excel表中直接增加元素，还是增加字段，都可以自动将excel中的数据解析为json，再转化为对象，而无需修改这个工具类，具有更好的实用性。


## 2020.5.19日下午代码更新说明
本次主要对原代码中读取配置数据的方式进行了优化：

在之前，时通过配置文件来修改或增加场景、NPC和怪物的相关常量数据。

目前已经进行了修改，可以直接在excel表中修改或增加场景、NPC和怪物的相关常量数据。

新建了一个ExcelToJson类，用于将excel表的数据解析成json，然后转换为java对象。

这样做相比之前，数据的表现更直观，更容易进行数据的增删等操作。

## 2020.5.18日下午代码更新说明

本次主要对原代码进行了一些优化

1.优化了场景之间的关系，将原来由数组表示场景间的关系，改为使用Hashmap结构来表示，其中key存储当前场景的名字，节点存储一个数组，该数组的元素为从当前场景出发可以到达的场景的id。使用move命令时，通过循环数组来查找目标场景是否可以到达。

2.优化了代码读取常量的方式，前面都是使用Const类来存储场景名字、场景关系、NPC名字和怪物名字，现已将这些数据统一使用配置文件存储，这样一来，新增数据时对代码没有侵入，也无需到代码中修改，只需要在对应的配置文件中修改或新增内容即可。由于使用了配置文件存储数据，数据库中的场景表、NPC表和怪物表也删除掉了。

3.在优化的同时，对涉及到的部分代码也进行了修改，进行了适当调整。


## 2020.5.17日上传的更新内容说明

本次更新主要对上一版本的一些问题和不足之处进行了完善

主要的改动有：

1.增加了Const类来保存一些常量信息，例如场景名字，NPC名字和怪物名字等

2.增加了自定义注解，用于对客户端输入的命令进行解析，然后根据命令自动调用FunctionService中的相应方法进行处理；先比于最初的条件判断具有更好的可读性和可扩展性

3.根据新增的常量类和自定义的注解类，对原代码中有相关调用的地方进行了修改，主要修改了调用数据库的类ConnectSql中的方法，避免了角色每次场景切换和查看场景信息等都需要查询数据库的操作，减少了对数据库的不必要的访问

4.增加了日志记录，存储在resources文件中，同时在该文件中增加了用到的数据库表，包括表的结构和数据


## 2020.5.14日初步实现功能：
用户注册与登录、角色注册与登录、角色move功能、aoi查看场景实体功能、checkPlace查看其它场景实体功能

#### 输出效果展示（idea的客户端控制台输入与输出）：

请输入命令：

client channel init!

login m m

登陆成功

loginR andy

登陆成功，您进入到了游戏世界

aoi

当前场景为：城堡；角色：andy 。 NPC：公主 商人 。 怪物：逃兵 叛军 

move 原始之地

不可以从这里去这个地方

checkPlace 森林

要查看的场景为：森林；角色：。 NPC：樵夫 猎户 。 怪物：猛虎 毒蛇 

move 村子

移动成功

aoi

当前场景为：村子；角色：andy 。 NPC：村长 铁匠 。 怪物：小偷 恶人 

checkPlace 城堡

要查看的场景为：城堡；角色：。 NPC：公主 商人 。 怪物：逃兵 叛军 

